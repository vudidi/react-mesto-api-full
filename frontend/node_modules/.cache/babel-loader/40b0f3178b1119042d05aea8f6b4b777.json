{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl\n    } = _ref;\n    this._baseUrl = baseUrl;\n  }\n\n  get _headers() {\n    return {\n      'Content-Type': 'application/json',\n      authorization: `Bearer ${localStorage.getItem('jwt')}`\n    };\n  }\n\n  getProfile() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  getCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  editProfile(name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._checkResponse);\n  }\n\n  updateAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._checkResponse);\n  }\n\n  addCard(name, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._checkResponse);\n  }\n\n  getLikes() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  likeCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  removeLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return this.removeLike(id);\n    } else {\n      return this.likeCard(id);\n    }\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n    }).then(this._checkResponse);\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Что-то пошло не так: ${res.status}`);\n  }\n\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.vudidi-mesto.nomoredomains.xyz',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"sources":["C:/Users/User/dev/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","constructor","baseUrl","_baseUrl","_headers","authorization","localStorage","getItem","getProfile","fetch","headers","then","_checkResponse","getCards","editProfile","name","about","method","body","JSON","stringify","updateAvatar","avatar","addCard","link","getLikes","likeCard","id","removeLike","changeLikeCardStatus","isLiked","deleteCard","res","ok","json","Promise","reject","status","api"],"mappings":"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","sourcesContent":["class Api {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n  }\n\n  get _headers() {\n    return {\n      'Content-Type': 'application/json',\n      authorization: `Bearer ${localStorage.getItem('jwt')}`,\n    };\n  }\n\n  getProfile() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  getCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  editProfile(name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  updateAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  addCard(name, link) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  getLikes() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  likeCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'PUT',\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  removeLike(id) {\n    return fetch(`${this._baseUrl}/cards/${id}/likes`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return this.removeLike(id);\n    } else {\n      return this.likeCard(id);\n    }\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Что-то пошло не так: ${res.status}`);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.vudidi-mesto.nomoredomains.xyz',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}